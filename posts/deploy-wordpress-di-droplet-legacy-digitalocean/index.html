<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Deploy Wordpress di Droplet (Legacy) DigitalOcean | pararang</title><meta name=keywords content="docker,wordpress,linux,ubuntu,nginx,server"><meta name=description content="Tutorial deploy WordPress di droplet lama DigitalOcean dengan menggunakan Docker dan Nginx reverse proxy untuk mengatasi keterbatasan resource server."><meta name=author content="Muhammad Ikhsan"><link rel=canonical href=https://pararang.com/posts/deploy-wordpress-di-droplet-legacy-digitalocean/><link crossorigin=anonymous href=/assets/css/stylesheet.c67a12ea24a42746f1b7dc30210d26b2113a2c22279073e1cb41ccffef51fcbc.css integrity="sha256-xnoS6iSkJ0bxt9wwIQ0mshE6LCInkHPhy0HM/+9R/Lw=" rel="preload stylesheet" as=style><link rel=icon href=https://pararang.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://pararang.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://pararang.com/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://pararang.com/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://pararang.com/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://pararang.com/posts/deploy-wordpress-di-droplet-legacy-digitalocean/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-WNZPHZGB2R"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-WNZPHZGB2R")</script><meta property="og:url" content="https://pararang.com/posts/deploy-wordpress-di-droplet-legacy-digitalocean/"><meta property="og:site_name" content="pararang"><meta property="og:title" content="Deploy Wordpress di Droplet (Legacy) DigitalOcean"><meta property="og:description" content="Tutorial deploy WordPress di droplet lama DigitalOcean dengan menggunakan Docker dan Nginx reverse proxy untuk mengatasi keterbatasan resource server."><meta property="og:locale" content="id-ID"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-11-03T22:29:00+08:00"><meta property="article:modified_time" content="2024-11-03T22:29:00+08:00"><meta property="og:image" content="https://pararang.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://pararang.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Deploy Wordpress di Droplet (Legacy) DigitalOcean"><meta name=twitter:description content="Tutorial deploy WordPress di droplet lama DigitalOcean dengan menggunakan Docker dan Nginx reverse proxy untuk mengatasi keterbatasan resource server."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://pararang.com/posts/"},{"@type":"ListItem","position":2,"name":"Deploy Wordpress di Droplet (Legacy) DigitalOcean","item":"https://pararang.com/posts/deploy-wordpress-di-droplet-legacy-digitalocean/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Deploy Wordpress di Droplet (Legacy) DigitalOcean","name":"Deploy Wordpress di Droplet (Legacy) DigitalOcean","description":"Tutorial deploy WordPress di droplet lama DigitalOcean dengan menggunakan Docker dan Nginx reverse proxy untuk mengatasi keterbatasan resource server.","keywords":["docker","wordpress","linux","ubuntu","nginx","server"],"articleBody":"Kemarin saya harus men-deploy worpdress pada hostingan lama berupa droplet tier paling basic di DigitalOcean. Masalahnya, di droplet ini sudah berjalan web apps Laravel yang di-ekspos menggunakan NGINX sebagai webservernya. Selain itu, versi PHP di server tidak kompatibel dengan WordPress terbaru, versi WordPress yang ingin kita gunakan membutuhkan versi PHP yang lebih tinggi dari yang saat ini diinstal di server. Kalau kita update versi PHP di server, ada kemungkinan Laravel yang sudah berjalan sekarang akan terganggu.\nKepikiran untuk install versi PHP yang lebih tinggi khusus untuk WordPress. Tapi akan ada pekerjaan tambahan untuk mengatur dua versi PHP sekaligus di satu server, khususnya ketika apps yang sudah ada sangat bergantung terhadap composer. Ini jelas akan menambah pekerjaan baru, kalau bukan saat ini, ya mungkin nanti. Kalau kata hukum Murphy, Whatever can go wrong will go wrong.\nGIF via Giphy\nOpsi selanjutnya adalah deploy dengan docker. Dengan cara ini kita bisa melokalisir dependensi yang wordpress butuhkan tanpa perlu khawatir bertabrakan dengan apps yang saat sudah berjalan. Tantangan dari opsi ini adalah RAM minimalis yang tersedia di server. Untuk mengakali RAM minimalis tanpa perlu upgrade server, saya memutuskan untuk menambahkan Swap file.\nSwap is a space on a disk that is used when the amount of physical RAM memory is full. When a Linux system runs out of RAM, inactive pages are moved from the RAM to the swap space. Swap space can take the form of either a dedicated swap partition or a swap file. In most cases, when running Linux on a virtual machine, a swap partition is not present, so the only option is to create a swap file.\n— Linuxize1\nSetup Wordpress dengan Docker Asumsinya adalah di server kita sudah terinstall Docker dan NGINX. Jadi, secara garis besar, yang harus kita lakukan adalah:\nmanjalankan wordpress beserta dependensinya (php, webserver, dan mysql) dengan docker. membuat web wordpress yang berjalan dengan docker dapat diakses publik melalui domain yang kita punya. diagram arsitektur wordpress dengan docker dan reverse proxy nginx\nBerikut langkah-langkahnya:\nLogin ssh ke server. Semua aktivitas atau command yang akan kita eksekusi selanjutnya didalakukan di dalam server. Buat folder wordpresssaya.com dengan perintah: mkdir wordpresssaya.com Nama folder bisa disesuaikan sesuai selera, saya biasanya membuat folder untuk web apps berdasarkan domainnya nanti. masuk ke folder yang baru saja kita buat dengan perintah cd wordpresssaya.com buat dot file .env (dengan nano atau vim), dan isi dengan env var yang dibutuhkan saat nge-build mysql. MYSQL_ROOT_PASSWORD=gantidenganpasswordyangkuat MYSQL_USER=sesuaikanusernamemysql MYSQL_PASSWORD=passwordusermysql siapkan config Nginx untuk container webserver dengan perintah-perintah berikut: mkdir nginx-conf touch nginx-conf/nginx.conf isi nginx.conf dengan settingan berikut: buat file docker-compose.yml, dan isi dengan konten berikut: Baris 8080:80 untuk mendefiniskan pemetaan port 80 Nginx di dalam container ke port 8080 di host yang berarti akses ke WordPress dapat dilakukan melalui http://localhost:8080 (akses dari dalam server). Pemetaan ini harus dieksplisitkan karena port 80 di host/server sudah terpakai untuk Nginx yang diinstal secara langsung ke server. Pada tahap ini, semua script yang kita butuhkan sudah tersedia. Selanjutnya adalah menjalankan wordpress dengan docker. Jalankan perintah\ndocker compose up -d Note Web yang kita buat dengan wordpress sudah berjalan di localhost port 8080 namun belum dapat diakses publik.\nReverse Proxy dengan Nginx Selanjutnya semua akses ke domain wordpresssaya.com perlu kita arahkan ke wordpress yang saat ini berjalan dalam kontainer. Di sini kita memanfaaatkan Nginx sebagai reverse proxy.\nA reverse proxy is a server that sits in front of web servers and forwards client (e.g. web browser) requests to those web servers. Reverse proxies are typically implemented to help increase security, performance, and reliability.\n— Cloudflare2\nNginx ini berperan sebagai forwarder trafik dari pengunjung ke kontainer dimana Nginx yang berfungsi sebagai web server dijalankan. Jadi, untuk melihat konten web wordpress kita, akses oleh pengguna akan melewati dua Nginx; yang berjalan di host dan yang berjalan di dalam kontainer docker.\nHal yang perlu kita lakukan adalah mendefinisikan config baru di Nginx host untuk menghandle akses yang datang ke wordpresssaya.com:80 dan mengarahkannya ke localhost:8080. Buat file baru pada directory config Nginx dengan perintah berikut\nnano /etc/nginx/conf.d/wordpresssaya.com.conf kemudian isikan dengan konten berikut:\nserver { server_name wordpresssaya.com; location / { proxy_pass http://localhost:8080; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; } } Jangan lupa reload Nginx di host: sudo service nginx reload dan wordpress yang berjalan pada kontainer sudah dapat diakses publik melalui alamat wordpresssaya.com.\nAgar lebih aman, kita perlu menambahkan sertifikat SSL. Apa dan bagaimana SSL bekerja, bisa baca di artikel ini. Penyedia SSL yang populer dan (karena) gratisan adalah Let’s Encrypt, untuk mendapatkannya cukup dengan menginstall certbot di server. Cara install certbot dapat mengikuti tutorial di sini.\nImportant Pastikan di setting DNS, sudah ada pengaturan (biasanya A record) untuk mengarakan domain ke IP server.\nKarena di server saya sudah ada cerbot, maka cukup dengan perintah certbot --nginx -d wordpresssaya.com, certbot akan mengenerate SSL dan memasangkannya ke domain tadi dengan secara otomatis memperbaharui config Nginx yang tadi kita buat.\nHow to Create a Linux Swap File tutorial ↩︎\nReverse Proxy explanation ↩︎\n","wordCount":"819","inLanguage":"en","image":"https://pararang.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2024-11-03T22:29:00+08:00","dateModified":"2024-11-03T22:29:00+08:00","author":{"@type":"Person","name":"Muhammad Ikhsan"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://pararang.com/posts/deploy-wordpress-di-droplet-legacy-digitalocean/"},"publisher":{"@type":"Organization","name":"pararang","logo":{"@type":"ImageObject","url":"https://pararang.com/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://pararang.com/ accesskey=h title="Home (Alt + H)"><img src=https://pararang.com/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://pararang.com/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://pararang.com/projects/ title=Projects><span>Projects</span></a></li><li><a href=https://pararang.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://pararang.com/>Home</a>&nbsp;»&nbsp;<a href=https://pararang.com/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Deploy Wordpress di Droplet (Legacy) DigitalOcean</h1><div class=post-description>Tutorial deploy WordPress di droplet lama DigitalOcean dengan menggunakan Docker dan Nginx reverse proxy untuk mengatasi keterbatasan resource server.</div><div class=post-meta><span title='2024-11-03 22:29:00 +0800 +0800'>November 3, 2024</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;819 words&nbsp;·&nbsp;Muhammad Ikhsan&nbsp;|&nbsp;<a href=https://github.com/pararang/pararang.github.io/posts/20241103-deploy-wordpress-di-droplet-legacy-digitalocean.md rel="noopener noreferrer edit" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#setup-wordpress-dengan-docker>Setup Wordpress dengan Docker</a></li><li><a href=#reverse-proxy-dengan-nginx>Reverse Proxy dengan Nginx</a></li></ul></nav></div></details></div><div class=post-content><p>Kemarin saya harus men-deploy worpdress pada hostingan lama berupa droplet tier paling basic di DigitalOcean. Masalahnya, di droplet ini sudah berjalan web apps Laravel yang di-ekspos menggunakan NGINX sebagai webservernya. Selain itu, versi PHP di server tidak kompatibel dengan WordPress terbaru, versi WordPress yang ingin kita gunakan membutuhkan versi PHP yang lebih tinggi dari yang saat ini diinstal di server. Kalau kita update versi PHP di server, ada kemungkinan Laravel yang sudah berjalan sekarang akan terganggu.</p><p>Kepikiran untuk install versi PHP yang lebih tinggi khusus untuk WordPress. Tapi akan ada pekerjaan tambahan untuk mengatur dua versi PHP sekaligus di satu server, khususnya ketika apps yang sudah ada sangat bergantung terhadap composer. Ini jelas akan menambah pekerjaan baru, kalau bukan saat ini, ya mungkin nanti. Kalau kata hukum Murphy, <strong>Whatever can go wrong will go wrong</strong>.</p><figure class=align-center><img loading=lazy src=https://media.giphy.com/media/g3h4YTHFBgfbG/giphy.gif#center alt="its possible" width=100%><figcaption><p>GIF via Giphy</p></figcaption></figure><p>Opsi selanjutnya adalah deploy dengan docker. Dengan cara ini kita bisa melokalisir dependensi yang wordpress butuhkan tanpa perlu khawatir bertabrakan dengan apps yang saat sudah berjalan. Tantangan dari opsi ini adalah RAM minimalis yang tersedia di server. Untuk mengakali RAM minimalis tanpa perlu upgrade server, saya memutuskan untuk menambahkan Swap file.</p><blockquote><p>Swap is a space on a disk that is used when the amount of physical RAM memory is full. When a Linux system runs out of RAM, inactive pages are moved from the RAM to the swap space. Swap space can take the form of either a dedicated swap partition or a swap file. In most cases, when running Linux on a virtual machine, a swap partition is not present, so the only option is to create a swap file.</p><p>— Linuxize<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></p></blockquote><hr><h2 id=setup-wordpress-dengan-docker>Setup Wordpress dengan Docker<a hidden class=anchor aria-hidden=true href=#setup-wordpress-dengan-docker>#</a></h2><p>Asumsinya adalah di server kita sudah terinstall Docker dan NGINX. Jadi, secara garis besar, yang harus kita lakukan adalah:</p><ul><li>manjalankan wordpress beserta dependensinya (php, webserver, dan mysql) dengan docker.</li><li>membuat web wordpress yang berjalan dengan docker dapat diakses publik melalui domain yang kita punya.</li></ul><figure class=align-center><img loading=lazy src=/images/wordpress-docker-nginx.png#center alt=wordpress-docker-nginx width=100%><figcaption><p>diagram arsitektur wordpress dengan docker dan reverse proxy nginx</p></figcaption></figure><p>Berikut langkah-langkahnya:</p><ol><li>Login ssh ke server. Semua aktivitas atau command yang akan kita eksekusi selanjutnya didalakukan di dalam server.</li><li>Buat folder <code>wordpresssaya.com</code> dengan perintah:<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkdir wordpresssaya.com
</span></span></code></pre></div>Nama folder bisa disesuaikan sesuai selera, saya biasanya membuat folder untuk web apps berdasarkan domainnya nanti.</li><li>masuk ke folder yang baru saja kita buat dengan perintah<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> wordpresssaya.com
</span></span></code></pre></div></li><li>buat dot file <code>.env</code> (dengan nano atau vim), dan isi dengan env var yang dibutuhkan saat nge-build mysql.<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>MYSQL_ROOT_PASSWORD</span><span class=o>=</span>gantidenganpasswordyangkuat
</span></span><span class=line><span class=cl><span class=nv>MYSQL_USER</span><span class=o>=</span>sesuaikanusernamemysql
</span></span><span class=line><span class=cl><span class=nv>MYSQL_PASSWORD</span><span class=o>=</span>passwordusermysql
</span></span></code></pre></div></li><li>siapkan config Nginx untuk container webserver dengan perintah-perintah berikut:<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkdir nginx-conf
</span></span><span class=line><span class=cl>touch nginx-conf/nginx.conf
</span></span></code></pre></div></li><li>isi nginx.conf dengan settingan berikut:
<script src=https://gist.github.com/pararang/4ae7ed1d1a5f6f7c33bca3e74ff60f28.js></script></li><li>buat file <code>docker-compose.yml</code>, dan isi dengan konten berikut:
<script src=https://gist.github.com/pararang/837bdccc0e3bef8177d370d23961af8c.js></script>Baris <code>8080:80</code> untuk mendefiniskan pemetaan port 80 Nginx di dalam container ke port 8080 di host yang berarti akses ke WordPress dapat dilakukan melalui http://localhost:8080 (akses dari dalam server). Pemetaan ini harus dieksplisitkan karena port 80 di host/server sudah terpakai untuk Nginx yang diinstal secara langsung ke server.</li></ol><p>Pada tahap ini, semua script yang kita butuhkan sudah tersedia. Selanjutnya adalah menjalankan wordpress dengan docker. Jalankan perintah</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker compose up -d
</span></span></code></pre></div><link rel=stylesheet href=/css/vendors/admonitions.4fd9a0b8ec8899f2ca952048d255a569f433f77dfb3f52f5bc87e7d65cdce449.css integrity="sha256-T9mguOyImfLKlSBI0lWlafQz9337P1L1vIfn1lzc5Ek=" crossorigin=anonymous><div class="admonition note"><div class=admonition-header><svg viewBox="0 0 576 512"><path d="M0 64C0 28.7 28.7.0 64 0H224v128c0 17.7 14.3 32 32 32h128v125.7l-86.8 86.8c-10.3 10.3-17.5 23.1-21 37.2l-18.7 74.9c-2.3 9.2-1.8 18.8 1.3 27.5L64 512c-35.3.0-64-28.7-64-64V64zm384 64H256V0L384 128zM549.8 235.7l14.4 14.4c15.6 15.6 15.6 40.9.0 56.6l-29.4 29.4-71-71 29.4-29.4c15.6-15.6 40.9-15.6 56.6.0zM311.9 417 441.1 287.8l71 71L382.9 487.9c-4.1 4.1-9.2 7-14.9 8.4l-60.1 15c-5.5 1.4-11.2-.2-15.2-4.2s-5.6-9.7-4.2-15.2l15-60.1c1.4-5.6 4.3-10.8 8.4-14.9z"/></svg>
<span>Note</span></div><div class=admonition-content><p>Web yang kita buat dengan wordpress sudah berjalan di localhost port 8080 namun belum dapat diakses publik.</p></div></div><hr><h2 id=reverse-proxy-dengan-nginx>Reverse Proxy dengan Nginx<a hidden class=anchor aria-hidden=true href=#reverse-proxy-dengan-nginx>#</a></h2><p>Selanjutnya semua akses ke domain <code>wordpresssaya.com</code> perlu kita arahkan ke wordpress yang saat ini berjalan dalam kontainer. Di sini kita memanfaaatkan Nginx sebagai reverse proxy.</p><blockquote><p>A reverse proxy is a server that sits in front of web servers and forwards client (e.g. web browser) requests to those web servers. Reverse proxies are typically implemented to help increase security, performance, and reliability.</p><p>— Cloudflare<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup></p></blockquote><p>Nginx ini berperan sebagai forwarder trafik dari pengunjung ke kontainer dimana Nginx yang berfungsi sebagai web server dijalankan. Jadi, untuk melihat konten web wordpress kita, akses oleh pengguna akan melewati dua Nginx; yang berjalan di host dan yang berjalan di dalam kontainer docker.</p><p>Hal yang perlu kita lakukan adalah mendefinisikan config baru di Nginx host untuk menghandle akses yang datang ke <code>wordpresssaya.com:80</code> dan mengarahkannya ke <code>localhost:8080</code>.
Buat file baru pada directory config Nginx dengan perintah berikut</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl> nano /etc/nginx/conf.d/wordpresssaya.com.conf
</span></span></code></pre></div><p>kemudian isikan dengan konten berikut:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-nginx data-lang=nginx><span class=line><span class=cl> <span class=k>server</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kn>server_name</span> <span class=s>wordpresssaya.com</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kn>location</span> <span class=s>/</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kn>proxy_pass</span> <span class=s>http://localhost:8080</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kn>proxy_set_header</span> <span class=s>Host</span> <span class=nv>$host</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kn>proxy_set_header</span> <span class=s>X-Real-IP</span> <span class=nv>$remote_addr</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kn>proxy_set_header</span> <span class=s>X-Forwarded-For</span> <span class=nv>$proxy_add_x_forwarded_for</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kn>proxy_set_header</span> <span class=s>X-Forwarded-Proto</span> <span class=nv>$scheme</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Jangan lupa reload Nginx di host: <code>sudo service nginx reload</code> dan wordpress yang berjalan pada kontainer sudah dapat diakses publik melalui alamat wordpresssaya.com.</p><p>Agar lebih aman, kita perlu menambahkan sertifikat SSL. Apa dan bagaimana SSL bekerja, bisa baca di artikel <a href=https://www.cloudflare.com/learning/ssl/what-is-ssl/>ini</a>. Penyedia SSL yang populer dan (karena) gratisan adalah Let&rsquo;s Encrypt, untuk mendapatkannya cukup dengan menginstall <code>certbot</code> di server. Cara install certbot dapat mengikuti tutorial <a href=https://www.digitalocean.com/community/tutorials/how-to-secure-nginx-with-let-s-encrypt-on-ubuntu-20-04>di sini</a>.</p><div class="admonition important"><div class=admonition-header><svg viewBox="0 0 512 512"><path d="M256 512A256 256 0 10256 0a256 256 0 100 512zm0-384c13.3.0 24 10.7 24 24v112c0 13.3-10.7 24-24 24s-24-10.7-24-24V152c0-13.3 10.7-24 24-24zM224 352a32 32 0 1164 0 32 32 0 11-64 0z"/></svg>
<span>Important</span></div><div class=admonition-content><p>Pastikan di setting DNS, sudah ada pengaturan (biasanya A record) untuk mengarakan domain ke IP server.</p></div></div><p>Karena di server saya sudah ada cerbot, maka cukup dengan perintah <code>certbot --nginx -d wordpresssaya.com</code>, certbot akan mengenerate SSL dan memasangkannya ke domain tadi dengan secara otomatis memperbaharui config Nginx yang tadi kita buat.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>How to Create a Linux Swap File <a href=https://linuxize.com/post/create-a-linux-swap-file/>tutorial</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>Reverse Proxy <a href=https://www.cloudflare.com/learning/cdn/glossary/reverse-proxy/>explanation</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://pararang.com/posts/setup-meta-tag-layer-infrastruktur/><span class=title>« Next</span><br><span>Setup Meta Tag Noindex/Nofollow di Layer Infrastruktur</span>
</a><a class=next href=https://pararang.com/posts/akses-ssh-github-dengan-multipel-akun/><span class=title>Prev »</span><br><span>Mengelolah Akses SSH Github dengan Multipel Akun pada MacOS</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Deploy Wordpress di Droplet (Legacy) DigitalOcean on x" href="https://x.com/intent/tweet/?text=Deploy%20Wordpress%20di%20Droplet%20%28Legacy%29%20DigitalOcean&amp;url=https%3a%2f%2fpararang.com%2fposts%2fdeploy-wordpress-di-droplet-legacy-digitalocean%2f&amp;hashtags=docker%2cwordpress%2clinux%2cubuntu%2cnginx%2cserver"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Deploy Wordpress di Droplet (Legacy) DigitalOcean on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fpararang.com%2fposts%2fdeploy-wordpress-di-droplet-legacy-digitalocean%2f&amp;title=Deploy%20Wordpress%20di%20Droplet%20%28Legacy%29%20DigitalOcean&amp;summary=Deploy%20Wordpress%20di%20Droplet%20%28Legacy%29%20DigitalOcean&amp;source=https%3a%2f%2fpararang.com%2fposts%2fdeploy-wordpress-di-droplet-legacy-digitalocean%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Deploy Wordpress di Droplet (Legacy) DigitalOcean on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fpararang.com%2fposts%2fdeploy-wordpress-di-droplet-legacy-digitalocean%2f&title=Deploy%20Wordpress%20di%20Droplet%20%28Legacy%29%20DigitalOcean"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Deploy Wordpress di Droplet (Legacy) DigitalOcean on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fpararang.com%2fposts%2fdeploy-wordpress-di-droplet-legacy-digitalocean%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Deploy Wordpress di Droplet (Legacy) DigitalOcean on whatsapp" href="https://api.whatsapp.com/send?text=Deploy%20Wordpress%20di%20Droplet%20%28Legacy%29%20DigitalOcean%20-%20https%3a%2f%2fpararang.com%2fposts%2fdeploy-wordpress-di-droplet-legacy-digitalocean%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Deploy Wordpress di Droplet (Legacy) DigitalOcean on telegram" href="https://telegram.me/share/url?text=Deploy%20Wordpress%20di%20Droplet%20%28Legacy%29%20DigitalOcean&amp;url=https%3a%2f%2fpararang.com%2fposts%2fdeploy-wordpress-di-droplet-legacy-digitalocean%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentColor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Deploy Wordpress di Droplet (Legacy) DigitalOcean on ycombinator" href="https://news.ycombinator.com/submitlink?t=Deploy%20Wordpress%20di%20Droplet%20%28Legacy%29%20DigitalOcean&u=https%3a%2f%2fpararang.com%2fposts%2fdeploy-wordpress-di-droplet-legacy-digitalocean%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://pararang.com/>pararang</a></span> ·
<span><a href=/taxonomies/>Taxonomies</a> ·
<a href=/index.xml>RSS</a> ·
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>